<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Guía Detallada: Fuerza Bruta para el TSP</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    :root {
      --bg-primary: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
      --bg-secondary: rgba(255, 255, 255, 0.9);
      --bg-tertiary: rgba(248, 250, 252, 0.85);
      --text-primary: #2d3748;
      --text-secondary: #4a5568;
      --text-light: #ffffff;
      --accent-primary: #8e2de2;
      --accent-secondary: #4a00e0;
      --accent-gradient: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
      --border-color: rgba(226, 232, 240, 0.9);
      --shadow-card: 0 15px 35px rgba(0, 0, 0, 0.08);
      --border-radius: 20px;
      --transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    }
    [data-theme="dark"] {
      --bg-primary: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
      --bg-secondary: rgba(26, 32, 44, 0.9);
      --bg-tertiary: rgba(45, 55, 72, 0.75);
      --text-primary: #f7fafc;
      --text-secondary: #a0aec0;
      --accent-primary: #a777e3;
      --accent-secondary: #7aa5fc;
      --border-color: rgba(255, 255, 255, 0.15);
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body { font-family: 'Inter', sans-serif; line-height: 1.8; background: var(--bg-primary); color: var(--text-primary); transition: var(--transition); min-height: 100vh; position: relative; overflow-x: hidden; }
    
    .container { max-width: 1000px; margin: 0 auto; padding: 2rem; z-index: 1; }
    .header { text-align: center; margin-bottom: 3rem; position: relative; }
    .main-title { font-size: clamp(2.5rem, 5vw, 3.8rem); font-weight: 800; background: var(--accent-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 1rem; }
    .subtitle { font-size: 1.4rem; color: var(--text-light); font-weight: 400; opacity: 0.95; text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); max-width: 900px; margin: auto; }

    .theme-toggle { position: fixed; top: 2rem; right: 2rem; width: 60px; height: 60px; border: 1px solid var(--border-color); border-radius: 50%; background: var(--bg-secondary); backdrop-filter: blur(15px); box-shadow: var(--shadow-card); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.4rem; color: var(--accent-primary); transition: var(--transition); z-index: 1000; }
    .theme-toggle:hover { transform: scale(1.15) rotate(180deg); box-shadow: 0 25px 50px rgba(0, 0, 0, 0.12), 0 0 30px rgba(106, 17, 203, 0.3); }

    .lesson-container { display: flex; flex-direction: column; gap: 1.5rem; }
    .topic-card { background: var(--bg-secondary); backdrop-filter: blur(20px); border-radius: var(--border-radius); box-shadow: var(--shadow-card); border: 2px solid var(--border-color); overflow: hidden; transition: var(--transition); }
    .topic-header { cursor: pointer; padding: 1.5rem 2rem; display: flex; justify-content: space-between; align-items: center; }
    .topic-title { font-size: 1.3rem; font-weight: 600; color: var(--text-primary); }
    .expand-icon { font-size: 1.2rem; color: var(--text-secondary); transition: var(--transition); }
    .topic-card.open .expand-icon { transform: rotate(180deg); }
    .topic-content { max-height: 0; overflow: hidden; transition: max-height 1.8s ease, padding 1.8s ease; background: var(--bg-tertiary); }
    .topic-card.open .topic-content { max-height: 9000px; padding: 1.5rem 2rem; border-top: 1px solid var(--border-color); }
    .topic-content p, .topic-content ul { color: var(--text-secondary); margin-bottom: 1.5rem; }
    .topic-content h4 { font-size: 1.2rem; color: var(--text-primary); margin-top: 2.5rem; margin-bottom: 1.5rem; font-weight: 600; border-bottom: 2px solid var(--border-color); padding-bottom: 0.5rem; }
    .topic-content ul { padding-left: 20px; }
    .topic-content li { margin-bottom: 1rem; line-height: 1.7; }
    .topic-content strong { color: var(--text-primary); font-weight: 600; }
    .topic-content code { font-family: 'JetBrains Mono', monospace; background-color: rgba(0,0,0,0.05); padding: 2px 6px; border-radius: 4px; color: var(--accent-primary); font-size: 0.9em; }
    [data-theme="dark"] .topic-content code { background-color: rgba(0,0,0,0.3); }
    
    .diagram-container, .analogy-box, .table-container { background: rgba(0,0,0,0.02); border: 1px solid var(--border-color); border-radius: 10px; padding: 1.5rem; margin: 2.5rem 0; font-family: 'JetBrains Mono', monospace; color: var(--text-secondary); }
    [data-theme="dark"] .diagram-container, [data-theme="dark"] .analogy-box, [data-theme="dark"] .table-container { background: rgba(0,0,0,0.2); }
    .diagram-title, .analogy-title { font-weight: 600; text-align: center; margin-bottom: 2rem; color: var(--text-primary); font-size: 1rem; }
    .diagram-flow, .diagram-grid { display: flex; justify-content: space-around; align-items: center; gap: 1rem; flex-wrap: wrap;}
    .diagram-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); align-items: stretch; gap: 1.5rem; }
    .diagram-box { border: 2px solid var(--border-color); padding: 1rem; border-radius: 8px; text-align: center; background: var(--bg-secondary); box-shadow: var(--shadow-card); min-width: 120px; display: flex; flex-direction: column; justify-content: center; }
    .diagram-box strong { display: block; font-size: 0.9em; color: var(--text-primary); margin-bottom: 0.3rem; }
    .diagram-box span { font-size: 0.8em; }
    .diagram-arrow { flex-grow: 1; position: relative; text-align: center; }
    .diagram-arrow::after { content: '→'; font-size: 2.5rem; color: var(--accent-primary); }
    .diagram-arrow-label { font-size: 0.8em; font-weight: 500; }
    .analogy-box { font-family: 'Inter', sans-serif; font-style: italic; line-height: 1.7; }
    .analogy-box p { color: var(--text-secondary); }
    .formula-box { font-family: 'JetBrains Mono', monospace; text-align: center; font-size: 1.1em; padding: 1rem; color: var(--text-primary); }
    .highlight { color: var(--accent-primary); font-weight: bold; }
    
    table { width: 100%; border-collapse: collapse; text-align: center; font-family: 'JetBrains Mono', monospace; margin-top: 1rem; }
    th, td { padding: 10px; border: 1px solid var(--border-color); }
    th { background-color: rgba(0,0,0,0.05); color: var(--text-primary); font-weight: 600; }
    td:first-child, th:first-child { background-color: rgba(0,0,0,0.05); font-weight: 600; }
    [data-theme="dark"] th, [data-theme="dark"] td:first-child { background-color: rgba(255,255,255,0.05); }

    footer { text-align: center; margin-top: 4rem; padding: 2rem 0; border-top: 1px solid var(--border-color); }
    footer p { color: var(--text-light); opacity: 0.9; margin-bottom: 0.5rem; }
  </style>
</head>
<body data-theme="dark">
  <div class="theme-toggle" id="themeToggleButton" title="Cambiar tema"><i class="fas fa-moon" id="theme-icon"></i></div>
  
  <div class="container">
    <header class="header">
      <h1 class="main-title">Algoritmo de Fuerza Bruta para el TSP</h1>
      <p class="subtitle">Guía Organizada y Ampliada</p>
    </header>

    <div class="lesson-container">
        
        <div class="topic-card open">
            <div class="topic-header"><span class="topic-title">1. El Tour: Qué es y cómo se mide su costo</span><i class="fas fa-chevron-down expand-icon"></i></div>
            <div class="topic-content">
                <h4>Definición de Tour</h4>
                <p>Un tour en el TSP es un recorrido cerrado que parte de una ciudad de origen, visita cada una de las otras ciudades exactamente una vez, y finalmente regresa a la ciudad de origen. Si fijamos la ciudad <code>0</code> como origen, un tour es una permutación de las ciudades restantes: <code>(0, π(1), π(2), …, π(n-1), 0)</code>.</p>
                
                <h4>Costo de un Tour</h4>
                <p>El costo total de un tour (<code>L(π)</code>) es la suma de las distancias de cada tramo del recorrido.</p>
                <div class="diagram-container">
                    <div class="diagram-title">Componentes del Costo de un Tour</div>
                    <div class="diagram-flow">
                        <div class="diagram-box"><strong>Primer Salto</strong><span>d<sub>0,π(1)</sub></span></div>
                        <div class="diagram-arrow"><div class="diagram-arrow-label">+</div></div>
                        <div class="diagram-box"><strong>Saltos Intermedios</strong><span>Σ d<sub>π(k),π(k+1)</sub></span></div>
                        <div class="diagram-arrow"><div class="diagram-arrow-label">+</div></div>
                        <div class="diagram-box"><strong>Último Salto</strong><span>d<sub>π(n-1),0</sub></span></div>
                    </div>
                    <div class="formula-box">L(π) = d<sub>0,π(1)</sub> + ∑<sub>k=1</sub><sup>n-2</sup> d<sub>π(k),π(k+1)</sub> + d<sub>π(n-1),0</sub></div>
                </div>
            </div>
        </div>

        <div class="topic-card">
            <div class="topic-header"><span class="topic-title">2. ¿Qué significa que el TSP sea NP-difícil?</span><i class="fas fa-chevron-down expand-icon"></i></div>
            <div class="topic-content">
                <p>La dificultad del TSP reside en su complejidad computacional. Entenderla requiere conocer algunas clases de problemas:</p>
                <div class="diagram-container">
                    <div class="diagram-title">Clases de Complejidad</div>
                    <div class="diagram-grid">
                        <div class="diagram-box"><strong>P</strong><span>Problemas resueltos en tiempo polinomial. Son "fáciles" computacionalmente.</span></div>
                        <div class="diagram-box"><strong>NP</strong><span>Soluciones verificables en tiempo polinomial. "Difíciles" de resolver, pero "fáciles" de comprobar.</span></div>
                        <div class="diagram-box"><strong>NP-hard</strong><span>Al menos tan difíciles como cualquier problema en NP. El TSP de optimización ("minimiza el costo") está aquí.</span></div>
                        <div class="diagram-box"><strong>NP-completo</strong><span>Problemas que son tanto NP como NP-hard. El TSP de decisión ("¿existe un tour de costo ≤ B?") está aquí.</span></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="topic-card">
            <div class="topic-header"><span class="topic-title">3. 🔍 Algoritmo de Fuerza Bruta para el TSP</span><i class="fas fa-chevron-down expand-icon"></i></div>
            <div class="topic-content">
                <h4>Definición Formal</h4>
                <p>El método de fuerza bruta es la estrategia más directa: consiste en enumerar sistemáticamente todas las permutaciones posibles de las ciudades, calcular el costo de cada tour correspondiente, y seleccionar el que tenga el costo mínimo.</p>
                
                <h4>⚙️ Pasos del Algoritmo</h4>
                <div class="diagram-container">
                    <div class="diagram-title">Flujo Operativo de la Fuerza Bruta</div>
                    <div class="diagram-flow">
                        <div class="diagram-box"><strong>1. Fijar Origen</strong><span>Se elige una ciudad (ej. '0') para evitar contar rotaciones del mismo ciclo.</span></div>
                        <div class="diagram-arrow"></div>
                        <div class="diagram-box"><strong>2. Generar Permutaciones</strong><span>Se crean todas las secuencias posibles de las <code>n-1</code> ciudades restantes.</span></div>
                        <div class="diagram-arrow"></div>
                        <div class="diagram-box"><strong>3. Calcular Costos</strong><span>Para cada permutación, se suma la distancia del tour completo.</span></div>
                         <div class="diagram-arrow"></div>
                        <div class="diagram-box"><strong>4. Elegir Mínimo</strong><span>Se mantiene un registro del mejor tour encontrado y se actualiza si se halla uno mejor.</span></div>
                    </div>
                </div>

                <h4>📊 Complejidad: El Crecimiento Explosivo</h4>
                <p>La cantidad de rutas a verificar con un origen fijado es <code>(n-1)!</code>. Este crecimiento factorial hace que el algoritmo sea impracticable para más de un puñado de ciudades.</p>
                <div class="diagram-container">
                    <div class="diagram-title">El Muro Factorial: Número de Rutas a Evaluar</div>
                     <div class="diagram-grid">
                        <div class="diagram-box"><strong>n = 4</strong><span>3! = 6 rutas</span></div>
                        <div class="diagram-box"><strong>n = 10</strong><span>9! = 362,880 rutas</span></div>
                        <div class="diagram-box"><strong>n = 15</strong><span>14! ≈ 87 mil millones</span></div>
                        <div class="diagram-box"><strong class="highlight">n = 20</strong><span>19! ≈ 121,645 billones</span></div>
                    </div>
                </div>
                <ul>
                    <li><strong>Complejidad Temporal:</strong> <code>O(n!)</code></li>
                    <li><strong>Complejidad Espacial:</strong> <code>O(n)</code> (para almacenar el tour actual y el mejor encontrado).</li>
                </ul>

                <h4>📦 Analogía Intuitiva (Ampliada)</h4>
                <div class="analogy-box">
                    <div class="analogy-title">El Llavero Impracticable</div>
                    <p>Tienes un llavero y una serie de cerraduras que deben abrirse en una secuencia específica para desactivar una alarma. La fuerza bruta es como probar CADA posible orden de las llaves hasta encontrar la secuencia más rápida. Si tienes 3 llaves, es fácil. Si tienes 15, estarías probando combinaciones durante años.</p>
                </div>
            </div>
        </div>
        
        <div class="topic-card">
            <div class="topic-header"><span class="topic-title">4. 🔬 Ejemplo Numérico (n=4)</span><i class="fas fa-chevron-down expand-icon"></i></div>
            <div class="topic-content">
                <p>Consideremos 4 ciudades con la siguiente matriz de distancias:</p>
                <div class="table-container">
                    <table>
                        <thead><tr><th></th><th>0</th><th>1</th><th>2</th><th>3</th></tr></thead>
                        <tbody>
                            <tr><td>0</td><td>0</td><td>10</td><td>15</td><td>20</td></tr>
                            <tr><td>1</td><td>10</td><td>0</td><td>35</td><td>25</td></tr>
                            <tr><td>2</td><td>15</td><td>35</td><td>0</td><td>30</td></tr>
                            <tr><td>3</td><td>20</td><td>25</td><td>30</td><td>0</td></tr>
                        </tbody>
                    </table>
                </div>
                <p>Fijando el origen en 0, evaluamos las <code>(4-1)! = 6</code> permutaciones de {1, 2, 3}:</p>
                <ul>
                    <li>Tour (0,1,2,3,0) → <code>10 + 35 + 30 + 20 = 95</code></li>
                    <li>Tour (0,1,3,2,0) → <code>10 + 25 + 30 + 15 = <span class="highlight">80</span></code> ✅</li>
                    <li>Tour (0,2,1,3,0) → <code>15 + 35 + 25 + 20 = 95</code></li>
                    <li>Tour (0,2,3,1,0) → <code>15 + 30 + 25 + 10 = <span class="highlight">80</span></code> ✅</li>
                    <li>Tour (0,3,1,2,0) → <code>20 + 25 + 35 + 15 = 95</code></li>
                    <li>Tour (0,3,2,1,0) → <code>20 + 30 + 35 + 10 = 95</code></li>
                </ul>
                <p>El costo mínimo encontrado es <strong>80</strong>, correspondiente a dos tours óptimos empatados.</p>
            </div>
        </div>

        <div class="topic-card">
            <div class="topic-header"><span class="topic-title">5. 🚨 Limitaciones y Comentarios Prácticos</span><i class="fas fa-chevron-down expand-icon"></i></div>
            <div class="topic-content">
                <p>Aunque la fuerza bruta es simple de entender y garantiza encontrar la solución óptima, su escalabilidad es nula.</p>
                <ul>
                    <li><strong>Inviable en la práctica:</strong> Para <code>n > 15</code>, el tiempo de ejecución se vuelve astronómico en hardware convencional.</li>
                    <li><strong>Uso como baseline:</strong> Principalmente se utiliza como punto de referencia para medir la calidad de algoritmos heurísticos o para resolver instancias de problema muy pequeñas.</li>
                    <li><strong>Alternativas:</strong> En la práctica, se utilizan algoritmos exactos más inteligentes como <strong>Branch and Bound</strong> o algoritmos aproximados (heurísticos) como <strong>Recocido Simulado</strong> o <strong>Algoritmos Genéticos</strong> para encontrar soluciones de alta calidad en un tiempo razonable.</li>
                </ul>
            </div>
        </div>
        
    </div>

    <footer>
      <p>Material de estudio sobre el Algoritmo de Fuerza Bruta para el TSP</p>
      <p>Elaborado por el profesor Sergio Gevatschnaider</p>
    </footer>

  </div>
  
  <script>
    (function() {
        const themeToggleButton = document.getElementById('themeToggleButton');
        const themeIcon = document.getElementById('theme-icon');
        const bodyEl = document.body;

        function setTheme(theme) {
            bodyEl.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            if (themeIcon) {
                themeIcon.className = theme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
            }
        }

        themeToggleButton.addEventListener('click', () => {
            const currentTheme = bodyEl.getAttribute('data-theme') || 'dark';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            setTheme(newTheme);
        });

        const savedTheme = localStorage.getItem('theme') || 'dark';
        setTheme(savedTheme);

        document.querySelectorAll('.topic-header').forEach(header => {
            header.addEventListener('click', () => {
                const card = header.parentElement;
                card.classList.toggle('open');
            });
        });
    })();
  </script>
</body>
</html>